[gd_scene load_steps=64 format=3 uid="uid://vgmb5l1ihc2p"]

[ext_resource type="Script" path="res://prefabs/test/battle/battle_tester.gd" id="1_7scea"]
[ext_resource type="Resource" uid="uid://dxwkpv5vlcigq" path="res://gamedata/moves/thunderstrike/thunderstrike.tres" id="2_3w0uv"]
[ext_resource type="Script" path="res://scripts/battle/combatant.gd" id="2_12odb"]
[ext_resource type="Resource" uid="uid://crei2j1v6q4jn" path="res://gamedata/moves/slice/slice.tres" id="4_cmvjq"]
[ext_resource type="Resource" uid="uid://dvr8s8ujdy6f1" path="res://gamedata/combatants/player/player_sprite.tres" id="5_0er0p"]
[ext_resource type="Resource" uid="uid://b7fwd75mauun" path="res://gamedata/moves/mage_blast/mage_blast.tres" id="5_dh2tk"]
[ext_resource type="Script" path="res://scripts/battle/combatant/movepool.gd" id="6_ohjbr"]
[ext_resource type="Script" path="res://scripts/battle/combatant/stats.gd" id="7_ouq35"]
[ext_resource type="Resource" uid="uid://ddxdw8fyirruw" path="res://gamedata/combatants/player/player_stat_growth.tres" id="8_thl3q"]
[ext_resource type="Script" path="res://scripts/battle/battle_scene/battle_command.gd" id="9_jd22b"]
[ext_resource type="Script" path="res://scripts/battle/status_effects/endure.gd" id="10_tg47m"]
[ext_resource type="Resource" uid="uid://m0gb68fd256q" path="res://gamedata/combatants/tree_bear/tree_bear_sprite.tres" id="14_8tdek"]
[ext_resource type="Resource" uid="uid://bfkpkrjtkr1yh" path="res://gamedata/combatants/solius/solius_rewards.tres" id="14_qb2p1"]
[ext_resource type="Resource" uid="uid://s0w201cc85nl" path="res://gamedata/combatants/tree_bear/tree_bear_movepool.tres" id="14_tebfq"]
[ext_resource type="Resource" uid="uid://cklm6fg7frkqq" path="res://gamedata/combatants/tree_bear/tree_bear_stat_growth.tres" id="15_ahtpg"]
[ext_resource type="Resource" uid="uid://b5qdockvs7by1" path="res://gamedata/combatants/solius/solius_evolutions.tres" id="15_i6rka"]
[ext_resource type="Resource" uid="uid://r5nfn065bsw4" path="res://gamedata/combatants/rat/rat_movepool.tres" id="15_qn3hw"]
[ext_resource type="Resource" uid="uid://c63oatk8g1jh6" path="res://gamedata/combatants/rat/rat_stat_growth.tres" id="16_1n64h"]
[ext_resource type="Resource" uid="uid://byhxd5t7pvevm" path="res://gamedata/combatants/solius/solius_effectiveness.tres" id="16_nt2je"]
[ext_resource type="Script" path="res://scripts/battle/weighted_things/weighted_string.gd" id="17_hdtqw"]
[ext_resource type="Resource" uid="uid://4pup88f5tgtg" path="res://gamedata/combatants/solius/solius_sprite.tres" id="17_idd5h"]
[ext_resource type="Resource" uid="uid://bstxqhg72gire" path="res://gamedata/combatants/solius/solius_movepool.tres" id="18_duw15"]
[ext_resource type="Script" path="res://scripts/battle/battle_scene/turn_executor.gd" id="18_rw5pq"]
[ext_resource type="Resource" uid="uid://b6gpqdsyrjms1" path="res://gamedata/combatants/rat/rat_sprite.tres" id="19_8nfrw"]
[ext_resource type="Script" path="res://scripts/battle/status_effects/element_burn.gd" id="19_a5sey"]
[ext_resource type="Resource" uid="uid://cyohebl1miw2g" path="res://gamedata/combatants/solius/solius_stat_growth.tres" id="19_fdfdx"]
[ext_resource type="Script" path="res://prefabs/test/battle/mock_battle_ui.gd" id="19_kmf14"]
[ext_resource type="PackedScene" uid="uid://cm4jsnjutjfu6" path="res://prefabs/battle/combatant_node.tscn" id="20_2oj5r"]
[ext_resource type="Resource" uid="uid://b44rt6x6fxqsj" path="res://gamedata/combatants/solius/solius_equipment.tres" id="20_fk61q"]
[ext_resource type="PackedScene" uid="uid://dmc2ox37dega8" path="res://prefabs/audio/audio_handler.tscn" id="21_y6pws"]
[ext_resource type="Resource" uid="uid://dsi3u88tbgf0n" path="res://gamedata/combatants/cloud_gull/cloud_gull_rewards.tres" id="22_xbjvk"]
[ext_resource type="Resource" uid="uid://cnmexck5i2y38" path="res://gamedata/combatants/cloud_gull/cloud_gull_evolutions.tres" id="23_djiok"]
[ext_resource type="Resource" uid="uid://c6q3qr32go02t" path="res://gamedata/combatants/cloud_gull/cloud_gull_effectiveness.tres" id="24_tv3k6"]
[ext_resource type="Resource" uid="uid://bmsshj6dewl55" path="res://gamedata/combatants/cloud_gull/cloud_gull_movepool.tres" id="26_nv623"]
[ext_resource type="Script" path="res://scripts/battle/status_effects/bleed.gd" id="27_6lffl"]
[ext_resource type="Resource" uid="uid://c2wkek4sqrucc" path="res://gamedata/combatants/cloud_gull/cloud_gull_stat_growth.tres" id="27_lam2n"]
[ext_resource type="Resource" uid="uid://8hrdloy8r6ya" path="res://gamedata/moves/battle_chant/battle_chant.tres" id="28_3l5fj"]
[ext_resource type="Resource" uid="uid://c8if1u55s37vs" path="res://gamedata/combatants/cloud_gull/cloud_gull_sprite.tres" id="28_huiyb"]
[ext_resource type="PackedScene" uid="uid://chpi5qfgk1cqj" path="res://prefabs/ui/sfx_button.tscn" id="33_snsqx"]

[sub_resource type="Resource" id="Resource_hvfly"]
script = ExtResource("9_jd22b")
type = 1
move = ExtResource("2_3w0uv")
moveEffectType = 1
orbChange = 0
targetPositions = Array[String](["Bottom"])
randomNums = Array[float]([])

[sub_resource type="Resource" id="Resource_5jl4o"]
script = ExtResource("6_ohjbr")
pool = Array[Resource("res://scripts/battle/combatant/move.gd")]([ExtResource("4_cmvjq"), ExtResource("5_dh2tk")])

[sub_resource type="Resource" id="Resource_vwmsm"]
script = ExtResource("7_ouq35")
displayName = "Player"
saveName = "player"
level = 1
experience = 0
maxHp = 50
physAttack = 1
magicAttack = 1
resistance = 1
affinity = 1
speed = 1
statPts = 0
statGrowth = ExtResource("8_thl3q")
moves = Array[Resource("res://scripts/battle/combatant/move.gd")]([ExtResource("4_cmvjq"), ExtResource("5_dh2tk")])
movepool = SubResource("Resource_5jl4o")

[sub_resource type="Resource" id="Resource_rjdbl"]
script = ExtResource("10_tg47m")
lowestHp = 1
type = 12
potency = 1
overwritesOtherStatuses = false
turnsLeft = 1

[sub_resource type="Resource" id="Resource_ysrhl"]
script = ExtResource("2_12odb")
sprite = ExtResource("5_0er0p")
nickname = ""
stats = SubResource("Resource_vwmsm")
evolutionStats = {}
currentHp = 1
orbs = 0
statusEffect = SubResource("Resource_rjdbl")
friendship = 0.0
maxFriendship = 30.0
version = ""
aiType = 0
damageAggroType = 0
strategy = 0
aiOverrideWeight = 0.0
teamTable = Array[ExtResource("17_hdtqw")]([])
innateStatCategories = Array[int]([])
command = SubResource("Resource_hvfly")
downed = false

[sub_resource type="Resource" id="Resource_i3ge1"]
script = ExtResource("9_jd22b")
type = 1
move = ExtResource("4_cmvjq")
moveEffectType = 1
orbChange = 1
targetPositions = Array[String](["Center"])
randomNums = Array[float]([])

[sub_resource type="Resource" id="Resource_q07ea"]
script = ExtResource("7_ouq35")
displayName = "Solius"
saveName = "solius"
level = 1
experience = 0
maxHp = 50
physAttack = 1
magicAttack = 1
resistance = 1
affinity = 1
speed = 1
statPts = 0
statGrowth = ExtResource("19_fdfdx")
moves = Array[Resource("res://scripts/battle/combatant/move.gd")]([])
movepool = ExtResource("18_duw15")

[sub_resource type="Resource" id="Resource_4p0wd"]
script = ExtResource("2_12odb")
sprite = ExtResource("17_idd5h")
nickname = ""
stats = SubResource("Resource_q07ea")
evolutions = ExtResource("15_i6rka")
evolutionStats = {}
currentHp = -1
orbs = 0
friendship = 0.0
maxFriendship = 30.0
version = ""
aiType = 1
damageAggroType = 3
strategy = 1
aiOverrideWeight = 0.0
moveEffectiveness = ExtResource("16_nt2je")
weightedEquipment = ExtResource("20_fk61q")
teamTable = Array[ExtResource("17_hdtqw")]([])
dropTable = ExtResource("14_qb2p1")
innateStatCategories = Array[int]([0, 1, 2])
command = SubResource("Resource_i3ge1")
downed = false

[sub_resource type="Resource" id="Resource_h71dw"]
script = ExtResource("9_jd22b")
type = 1
move = ExtResource("4_cmvjq")
moveEffectType = 1
orbChange = 0
targetPositions = Array[String](["You"])
randomNums = Array[float]([0.5])

[sub_resource type="Resource" id="Resource_hula1"]
script = ExtResource("7_ouq35")
displayName = "Rat"
saveName = "rat"
level = 1
experience = 0
maxHp = 50
physAttack = 1
magicAttack = 1
resistance = 1
affinity = 1
speed = 1
statPts = 0
statGrowth = ExtResource("16_1n64h")
moves = Array[Resource("res://scripts/battle/combatant/move.gd")]([])
movepool = ExtResource("15_qn3hw")

[sub_resource type="Resource" id="Resource_g8u4s"]
script = ExtResource("19_a5sey")
element = 2
power = 45.0
attackerStat = 15.0
attackerLv = 10
type = 11
potency = 1
overwritesOtherStatuses = false
turnsLeft = 2

[sub_resource type="Resource" id="Resource_b3lik"]
script = ExtResource("17_hdtqw")
string = "rat"
weight = 0.55

[sub_resource type="Resource" id="Resource_41kde"]
script = ExtResource("17_hdtqw")
string = "tree_bear"
weight = 0.15

[sub_resource type="Resource" id="Resource_8n3fm"]
script = ExtResource("17_hdtqw")
string = ""
weight = 0.3

[sub_resource type="Resource" id="Resource_dvq57"]
script = ExtResource("2_12odb")
sprite = ExtResource("19_8nfrw")
nickname = ""
stats = SubResource("Resource_hula1")
evolutionStats = {}
currentHp = -1
orbs = 0
statusEffect = SubResource("Resource_g8u4s")
friendship = 0.0
maxFriendship = 30.0
version = ""
aiType = 1
damageAggroType = 0
strategy = 0
aiOverrideWeight = 0.35
teamTable = Array[ExtResource("17_hdtqw")]([SubResource("Resource_b3lik"), SubResource("Resource_41kde"), SubResource("Resource_8n3fm")])
innateStatCategories = Array[int]([0, 4])
command = SubResource("Resource_h71dw")
downed = false

[sub_resource type="Resource" id="Resource_lly4o"]
script = ExtResource("9_jd22b")
type = 1
move = ExtResource("28_3l5fj")
moveEffectType = 2
orbChange = -2
targetPositions = Array[String](["Top"])
randomNums = Array[float]([0.5])

[sub_resource type="Resource" id="Resource_8heid"]
script = ExtResource("7_ouq35")
displayName = "Tree-Bear"
saveName = "tree_bear"
level = 1
experience = 0
maxHp = 50
physAttack = 1
magicAttack = 1
resistance = 1
affinity = 1
speed = 1
statPts = 0
statGrowth = ExtResource("15_ahtpg")
moves = Array[Resource("res://scripts/battle/combatant/move.gd")]([])
movepool = ExtResource("14_tebfq")

[sub_resource type="Resource" id="Resource_g23lp"]
script = ExtResource("27_6lffl")
type = 2
potency = 1
overwritesOtherStatuses = false
turnsLeft = 3

[sub_resource type="Resource" id="Resource_rdypo"]
script = ExtResource("17_hdtqw")
string = "tree_bear"
weight = 0.2

[sub_resource type="Resource" id="Resource_baii4"]
script = ExtResource("17_hdtqw")
string = "rat"
weight = 0.5

[sub_resource type="Resource" id="Resource_ex7rj"]
script = ExtResource("17_hdtqw")
string = ""
weight = 0.3

[sub_resource type="Resource" id="Resource_r1f0o"]
script = ExtResource("2_12odb")
sprite = ExtResource("14_8tdek")
nickname = ""
stats = SubResource("Resource_8heid")
evolutionStats = {}
currentHp = -1
orbs = 0
statusEffect = SubResource("Resource_g23lp")
friendship = 0.0
maxFriendship = 30.0
version = ""
aiType = 3
damageAggroType = 0
strategy = 2
aiOverrideWeight = 0.4
teamTable = Array[ExtResource("17_hdtqw")]([SubResource("Resource_rdypo"), SubResource("Resource_baii4"), SubResource("Resource_ex7rj")])
innateStatCategories = Array[int]([3, 1, 2])
command = SubResource("Resource_lly4o")
downed = false

[sub_resource type="Resource" id="Resource_oyibh"]
script = ExtResource("7_ouq35")
displayName = "Cloud Gull"
saveName = "cloud_gull"
level = 1
experience = 0
maxHp = 50
physAttack = 1
magicAttack = 1
resistance = 1
affinity = 1
speed = 1
statPts = 0
statGrowth = ExtResource("27_lam2n")
moves = Array[Resource("res://scripts/battle/combatant/move.gd")]([])
movepool = ExtResource("26_nv623")

[sub_resource type="Resource" id="Resource_eeq5k"]
script = ExtResource("2_12odb")
sprite = ExtResource("28_huiyb")
nickname = ""
stats = SubResource("Resource_oyibh")
evolutions = ExtResource("23_djiok")
evolutionStats = {}
currentHp = -1
orbs = 0
friendship = 0.0
maxFriendship = 30.0
version = ""
aiType = 0
damageAggroType = 0
strategy = 0
aiOverrideWeight = 0.35
moveEffectiveness = ExtResource("24_tv3k6")
teamTable = Array[ExtResource("17_hdtqw")]([])
dropTable = ExtResource("22_xbjvk")
innateStatCategories = Array[int]([])
downed = false

[node name="BattleTester" type="Node2D" node_paths=PackedStringArray("globalMarker")]
script = ExtResource("1_7scea")
_playerCombatant = SubResource("Resource_ysrhl")
playerLv = 10
_minionCombatant = SubResource("Resource_4p0wd")
minionLv = 10
enemy1Combatant = SubResource("Resource_dvq57")
enemy1Lv = 9
enemy2Combatant = SubResource("Resource_r1f0o")
enemy2Lv = 10
enemy3Combatant = SubResource("Resource_eeq5k")
enemy3Lv = 9
globalMarker = NodePath("Marker2D")

[node name="TurnExecutor" type="Node" parent="." node_paths=PackedStringArray("battleController", "battleUI")]
script = ExtResource("18_rw5pq")
battleController = NodePath("..")
battleUI = NodePath("../MockBattleUI")

[node name="MockBattleUI" type="Camera2D" parent="." node_paths=PackedStringArray("battleController")]
zoom = Vector2(4, 4)
script = ExtResource("19_kmf14")
menuState = 6
battleController = NodePath("..")

[node name="Marker2D" type="Marker2D" parent="."]

[node name="PlayerCombatantNode" parent="." node_paths=PackedStringArray("battleController") instance=ExtResource("20_2oj5r")]
position = Vector2(-122, 1)
battlePosition = "You"
battleController = NodePath("..")

[node name="MinionCombatantNode" parent="." node_paths=PackedStringArray("battleController") instance=ExtResource("20_2oj5r")]
position = Vector2(-122, -42)
battlePosition = "Ally"
battleController = NodePath("..")

[node name="Enemy1CombatantNode" parent="." node_paths=PackedStringArray("battleController") instance=ExtResource("20_2oj5r")]
position = Vector2(49, -18)
role = 1
battlePosition = "Center"
battleController = NodePath("..")

[node name="OnAttackPos" parent="Enemy1CombatantNode" index="3"]
position = Vector2(-16, 0)

[node name="Enemy2CombatantNode" parent="." node_paths=PackedStringArray("battleController") instance=ExtResource("20_2oj5r")]
position = Vector2(56, -66)
role = 1
battlePosition = "Top"
battleController = NodePath("..")

[node name="Enemy3CombatantNode" parent="." node_paths=PackedStringArray("battleController") instance=ExtResource("20_2oj5r")]
position = Vector2(59, 25)
role = 1
battlePosition = "Bottom"
battleController = NodePath("..")

[node name="AudioHandler" parent="." instance=ExtResource("21_y6pws")]

[node name="SfxButton" parent="." instance=ExtResource("33_snsqx")]
offset_left = -25.0
offset_top = 49.0
offset_right = 30.0
offset_bottom = 80.0
text = "Next"

[editable path="Enemy1CombatantNode"]
[editable path="Enemy1CombatantNode/SpriteContainer/FrontParticleContainer/HitParticleEmitter"]
[editable path="Enemy1CombatantNode/HPTag/OrbDisplay"]
